<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
    <title>Frontend Mentor | Age calculator app</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
      body {
        background-color: #eaeaea;
      }

      .center-box {
        padding-top: 20px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 850px;
        height: 650px;
        background-color: #ffffff;
        border-radius: 50px 50px 300px 50px;
      }

      .form-control {
        width: 160px;
        height: 70px;
        font-size: 32px;
        font-family: "Poppins", sans-serif;
        font-weight: 700;
        color: #141414;
      }

      .row {
        max-width: ;
      }

      .mt-4 {
        margin-left: 60px;
      }

      .border-custom {
        margin: 50px 60px 0px;
        border: 0.1mm solid #DBDBDB;
      }

      .count-icon {
        position: absolute;
        border-radius: 50%;
        background-color: #141414;
        width: 100px;
        height: 100px;
        margin-top: -50px;
        margin-right: 60px;
        right: 0;
      }

      .icon-container {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100px;
      }

      .icon-container:hover {
        border-radius: 50%;
        background-color: #854DFF;
      }

      .attribution {
        margin-top: 10px;
        font-size: 14px;
        text-align: center;
        position: absolute;
        top: calc(50% + 325px);
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        font-weight: 400;
        font-family: "Poppins", sans-serif;
      }

      .attribution a {
        color: #DC3535;
      }

      .age-text {
        margin-top: 20px;
        position: absolute;
        left: 60px;
        font-size: 112px;
        font-family: "Poppins", sans-serif;
        font-style: italic;
        font-weight: 800;
        line-height: 125px;
        color: #141414;
      }

      .age-text text {
        color: #854DFF;
      }

      .form-control:focus {
        outline: none;
        box-shadow: none;
        border: 2px solid #854DFF;
      }

      .form-control:hover {
        border: 2px solid #854DFF;
        box-shadow: none;
      }

      .form-control:hover,
      .form-control:focus {
        caret-color: #854DFF;
      }

      .error-message {
        position: absolute;
        color: #FF5757;
        font-size: 14px;
        font-weight: 400i;
        margin-top: 5px;
        font-size: 12px;
        font-family: "Poppins", sans-serif;
        font-style: italic;
      }

      .form-control.error {
        border: 2px solid #FF5757;
      }

      .label-input{
        font-family: Poppins, sans-serif; 
        font-weight: 700; 
        color: #716F6F; 
        margin-bottom: 5px;
      }

      @media screen and (max-width: 768px) {
        body {
          padding-left: none;
          padding-right: none;
        }

        .error-message {
          font-size: 8px;
        }

        .label-input{
          font-size: 12px;
        }

        .center-box {
          position: fixed;
          padding-top: 50px;
          top: 50%;
          width: 340px;
          height: 490px;
          background-color: #ffffff;
          border-radius: 40px 40px 150px 40px;
          padding-left: 25px;
          margin-left: 0px;
          margin-right: 0px;
        }

        .icon-container {
          display: flex;
          align-items: center;
          justify-content: center;
          height: 60px;
          width: 60px;
        }

        .icon-container:hover {
          border-radius: 50%;
          background-color: #854DFF;
        }

        .count-icon {

          border-radius: 50%;
          background-color: #141414;
          width: 60px;
          height: 60px;
          margin-top: -30px;
          margin-right: 140px;
        }

        .form-control {
          height: 55px;
          width: 90px;
          font-size: 24px;
        }

        .col-md-3 {
          width: 90px;
          margin-right: 12px;
        }

        .mt-4 {

          margin-left: 0px;
          margin-right: 0px;
        }

        .igs {

          width: 25px;
          height: auto;
        }

        .age-text {
          margin-top: 40px;
          position: absolute;
          left: 0px;
          font-size: 52px;
          font-weight: 800;
          line-height: 60px;
          color: #141414;
          margin-left: 25px;
          margin-right: 25px;
        }

        .attribution {
          width: 250px;
          margin-top: -45px;
        }

        .border-custom {
        margin-right: 25px;
        margin-top: 55px;
        margin-left: 0px;
        border: 0.1mm solid #DBDBDB;
      }

      }
    </style>
  </head>
  <body>
    <div class="">
      <div class="center-box">
        <div class="mt-4">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label for="day-input" class="label-input">D A Y</label>
                <input type="number" class="form-control" id="day-input" placeholder="DD" min="1" max="31">
                <div class="error-message" id="day-error-message"></div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label for="month-input" class="label-input">M O N T H</label>
                <input class="form-control" type="number" id="month-input" placeholder="MM" min="1" max="12" maxlength="2">
                <div class="error-message" id="month-error-message"></div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label for="year-input" class="label-input">Y E A R</label>
                <input class="form-control" type="number" id="year-input" placeholder="YYYY" maxlength="4">
                <div class="error-message" id="year-error-message"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="border-custom"></div>
        <div class="count-icon">
          <div class="icon-container" onclick="calculateAge()">
            <img class="igs" src="assets/images/icon-arrow.svg">
          </div>
        </div>
        <div class="age-text">
          <text id="year-output">--</text> years <br>
          <text id="month-output">--</text> months <br>
          <text id="day-output">--</text> days
        </div>
      </div>
      <div class="attribution">Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. Coded by <a href="#">Alfian D</a>. </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const now = new Date();
      const currentYear = now.getFullYear();

      function isValidDate(day, month, year) {
        const date = new Date(`${year}-${month}-${day}`);
        if (date > now) {
          showError('day-error-message', 'Date must not be in the future.');
          return false;
        }
        const isValid = date.getDate() === parseInt(day, 10) && date.getMonth() === parseInt(month, 10) - 1 && date.getFullYear() === parseInt(year, 10);
        if (!isValid) {
          let errorMessage = 'Invalid date. Please enter a valid date.';
          if (!day || !month || !year) {
            errorMessage = 'Please fill in all fields with valid values.';
          } else if (day < 1 || day > 31) {
            errorMessage = 'Invalid day. Day must be between 1 and 31.';
          } else if (month < 1 || month > 12) {
            errorMessage = 'Invalid month. Month must be between 1 and 12.';
          } else if (year < 1 || year > currentYear) {
            errorMessage = 'Invalid year. Year must be Must be in the past.';
          } else if (day > 28 && month == 2) {
            errorMessage = 'Invalid day for February. February can only have up to 28 days.';
          } else if (day > 30 && (month == 4 || month == 6 || month == 9 || month == 11)) {
            errorMessage = 'Invalid day for this month. This month can only have up to 30 days.';
          } else if (day > 31) {
            errorMessage = 'Invalid day. Day cannot exceed 31.';
          }
          alert(errorMessage);
        }
        return isValid;
      }

      function showError(element, message) {
        const errorElement = document.getElementById(element);
        errorElement.textContent = message;
        // Hentikan eksekusi program jika ada pesan error
        throw new Error(message);
      }

      function calculateAge() {
        const dayInput = document.getElementById('day-input').value;
        const monthInput = document.getElementById('month-input').value;
        const yearInput = document.getElementById('year-input').value;
        const dayErrorMessage = document.getElementById('day-error-message');
        const monthErrorMessage = document.getElementById('month-error-message');
        const yearErrorMessage = document.getElementById('year-error-message');
        const dayInputElement = document.getElementById('day-input');
        const monthInputElement = document.getElementById('month-input');
        const yearInputElement = document.getElementById('year-input');
        dayErrorMessage.textContent = '';
        monthErrorMessage.textContent = '';
        yearErrorMessage.textContent = '';
        // Menghapus class error sebelum validasi baru
        dayInputElement.classList.remove('error');
        monthInputElement.classList.remove('error');
        yearInputElement.classList.remove('error');
        if (dayInput === '') {
          dayErrorMessage.textContent = 'This field is required';
          dayInputElement.classList.add('error');
        }
        if (monthInput === '') {
          monthErrorMessage.textContent = 'This field is required';
          monthInputElement.classList.add('error');
        }
        if (yearInput === '') {
          yearErrorMessage.textContent = 'This field is required';
          yearInputElement.classList.add('error');
          return isValidDate(false);
        }
        if (dayInput < 1 || dayInput > 31) {
          dayErrorMessage.textContent = 'Must be a valid day';
          dayInputElement.classList.add('error');
        }
        if (monthInput < 1 || monthInput > 12) {
          monthErrorMessage.textContent = 'Must be a valid month';
          monthInputElement.classList.add('error');
        }
        if (yearInput < 1 || yearInput > currentYear) {
          yearErrorMessage.textContent = 'Must be in the past';
          yearInputElement.classList.add('error');
          return isValidDate(false);
        }
        // Lakukan validasi tanggal
        if (!isValidDate(dayInput, monthInput, yearInput)) {
          return;
        }
        const birthdateInput = `${monthInput}/${dayInput}/${yearInput}`;
        const birthday = new Date(birthdateInput);
        const today = new Date();
        const ageInMilliseconds = today - birthday;
        const ageDate = new Date(ageInMilliseconds);
        const ageInYears = ageDate.getUTCFullYear() - 1970;
        const ageInMonths = ageDate.getUTCMonth();
        const ageInDays = ageDate.getUTCDate() - 1;
        const dayOutput = document.getElementById('day-output');
        const monthOutput = document.getElementById('month-output');
        const yearOutput = document.getElementById('year-output');
        dayOutput.textContent = ageInDays;
        monthOutput.textContent = ageInMonths;
        yearOutput.textContent = ageInYears;
      }
    </script>
  </body>
</html>